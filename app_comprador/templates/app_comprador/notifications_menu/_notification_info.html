<!-- Este html corresponde a cada cuadro con información de la notificación correspondiente -->
{% load static %}
<!-- Mensaje según el tipo -->
<div class="max-w-md rounded-lg bg-white shadow-md relative">
    <button class="absolute top-1 right-1 p-1 rounded-full hover:bg-gray-100 transition-colors" id="delete-notif-button" onclick="deleteNotifRequest()">
        <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 text-gray-400 hover:text-red-500" 
            viewBox="0 0 20 20" fill="currentColor">
        <path fill-rule="evenodd" 
                d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z" 
                clip-rule="evenodd"/>
        </svg>
    </button>
    <div class="textarea-md p-6">
        {% if notification.type == "entregado" %}
            <h3 class="text-xl font-bold">¡Tu pedido ha sido entregado!</h3>
            <p>sample text!!!!</p>
        {% elif notification.type == "cancelado" %}
            <h3 class="text-xl font-bold">Tu pedido ha sido cancelado :c</h3>
            <p>sample text!!!!</p>
        {% elif notification.type == "aceptado" %}
            <h3 class="text-xl font-bold">¡Tu pedido está en camino!</h3>
            <p>sample text!!!!</p>
        {% endif %}
    </div>

</div>

<script>
    function deleteNotifRequest() {
        fetch("{% url 'delete_notification' notification.id %}", {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json',
                'X-CSRFToken': getCookie('csrftoken')
            }
        })
        .then(res => {
            if (!res.ok) throw new Error('Failed');
            window.location.reload();
        })
        .catch(err => console.error(err));
    }

    function getCookie(name) {
        let cookieValue = null;
        if (document.cookie && document.cookie !== '') {
            const cookies = document.cookie.split(';');
            for (let i = 0; i < cookies.length; i++) {
                const cookie = cookies[i].trim();
                if (cookie.substring(0, name.length + 1) === (name + '=')) {
                    cookieValue = decodeURIComponent(cookie.substring(name.length + 1));
                    break;
                }
            }
        }
        return cookieValue;
    }
</script>