{% extends 'urappi/base.html' %} 
{% load static %}
{% block title %}Perfil del Repartidor{% endblock title %}




{% block content %}
<div class="main-content-pedidos container mx-auto px-4 py-8"> 
    <h1 class="text-3xl font-bold text-gray-800 mb-6 text-center">Pedidos Pendientes</h1> 

    <div class="pedidos-container flex flex-col gap-4 max-w-lg mx-auto"> 
        {% if pending_orders %}
            {% for pedido in pending_orders %}
              
                <div class="bg-white p-4 rounded-lg shadow-md border border-gray-200 flex flex-col justify-between h-56">
                    
                    <div class="flex items-center mb-4">
                      
                        <div class="w-16 h-16 rounded-full overflow-hidden mr-4 flex-shrink-0">
                            <img src="{{ pedido.product_list.0.prodImage.url }}" alt="Imagen del Pedido" class="w-full h-full object-cover">
                        </div>
                        
                       
                        <div class="flex-grow">
                            <p class="text-sm font-semibold text-gray-600">{{ pedido.id }}</p> 
                            <p class="text-lg font-bold text-black mt-1">{{ pedido.customer }}</p>
                        </div>

                       
                        <p class="text-xl font-extrabold text-green-600 ml-auto">{{ pedido.total}} CLP</p>
                    </div>

                    
                    <div class="flex justify-between items-start mb-4">
                        <div class="flex-1 mr-4">
                            <p class="text-sm text-gray-500">{{ pedido.deliveryLocation }} ({{ pedido.itemQuantity }} items)</p>
                        </div>
                        <div class="text-right">
                            <p class="text-lg font-bold text-gray-800">{{ pedido.createdAt }}</p>
                            <p class="text-sm text-gray-500">{{ pedido.shop.location }}</p>
                        </div>
                    </div>
                    
                   
                          
            <a href="{% url 'app_repartidor:order_selected' order_id=pedido.orderID %}">
                                <button class="w-full btn btn-primary mt-auto">Detalles</button>
                    </a>             
                       </div>
            {% endfor %}
        {% else %}
            <p class="text-gray-600 text-center">¡No hay pedidos pendientes en este momento!</p>
        {% endif %}
    </div>
</div>

<div class="fixed bottom-0 left-0 right-0 flex justify-center p-4 bg-base-100/80 backdrop-blur-sm border-t border-base-200">
  <div class="join shadow-lg">
    {% if page_obj.has_previous %}
      <a href="?page=1" class="join-item btn">«</a>
      <a href="?page={{ page_obj.previous_page_number }}" class="join-item btn">‹</a>
    {% endif %}
    
    <span class="join-item btn pointer-events-none">
      Página {{ page_obj.number }} de {{ page_obj.paginator.num_pages }}
    </span>
    
    {% if page_obj.has_next %}
      <a href="?page={{ page_obj.next_page_number }}" class="join-item btn">›</a>
      <a href="?page={{ page_obj.paginator.num_pages }}" class="join-item btn">»</a>
    {% endif %}
  </div>
</div>
{% endblock content %}