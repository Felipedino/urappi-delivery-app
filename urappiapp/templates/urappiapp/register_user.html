<!DOCTYPE html>

{% extends "urappi/base.html" %} 
{% block title %}Registro{% endblock %} 

{% block content %}

<div class="flex items-center justify-center h-full bg-base-200">
  <div class="card w-full max-w-md bg-base-100 shadow-xl">
    <div class="card-body">
      <h2 class="card-title justify-center"> Registro</h2>
      <p class="text-center text-sm mb-4">Crea tu cuenta para usar URappi</p>

      <form method="post" enctype="multipart/form-data">
        {% csrf_token %}

        <div class="form-control mb-4">
          <label class="label" for="nombre_usuario">
            <span class="label-text">Nombre</span>
          </label>
          <input type="text" id="nombre_usuario" name="nombre_usuario" class="input input-bordered input-primary w-full" min="5" max="80" required />
        </div>

        <div class="form-control mb-4">
          <label class="label" for="apodo">
            <span class="label-text">Apodo</span>
          </label>
          <input type="text" id="apodo" name="apodo" class="input input-bordered input-primary w-full" min="3" max="80" required />
        </div>

        <div class="form-control mb-4">
          <label class="label" for="pronombre">
            <span class="label-text">Pronombres</span>
          </label>
          <select id="pronombre" name="pronombre" class="select select-bordered select-primary w-full" required>
            <option disabled selected value="">Escoge tus pronombres</option>
            <option value="El">El</option>
            <option value="La">La</option>
            <option value="Le">Le</option>
            <option value="Otro">Otro</option>
          </select>
        </div>

        <div class="form-control mb-4">
          <label class="label" for="mail">
            <span class="label-text">Correo</span>
          </label>
          <input type="email" id="mail" name="mail" class="input input-primary input-bordered w-full" required />
        </div>

        <div class="form-control mb-4">
          <label class="label" for="contrase帽a">
            <span class="label-text">Contrase帽a</span>
          </label>
          <input type="password" id="contrase帽a" name="contrase帽a" class="input input-bordered input-primary w-full" required />
        </div>

        <div class="form-control mb-4">
          <label class="label" for="rol">
            <span class="label-text">Rol</span>
          </label>
          <select id="rol" name="rol" class="select select-bordered select-primary w-full" required onchange="toggleTiendaInput()">
            <option disabled selected value="">Selecciona un rol</option>
            <option value="customer">Cliente</option>
            <option value="deliver">Repartidor</option>
            <option value="seller">Vendedor</option>
          </select>
        </div>

        <div style="display: none;" id="seccion_vendedor">
            <div class="form-control mb-4" >
              <label class="label" for="nombre_tienda">
                <span class="label-text">Nombre de su tienda</span>
              </label>
              <input type="text" id="nombre_tienda" name="nombre_tienda" class="input input-bordered input-primary w-full" min="5" max="80" />
            </div>

            <div class="form-control mb-4">
              <label class="label" for="hora_apertura">
                <span class="label-text">Hora de apertura</span>
              </label>
              <input type="time" id="hora_apertura" name="hora_apertura" class="input time input-primary w-full" />
            </div>

            <div class="form-control mb-4">
              <label class="label" for="hora_cierre">
                <span class="label-text">Hora de cierre</span>
              </label>
              <input type="time" id="hora_cierre" name="hora_cierre" class="input time input-primary w-full" />
            </div>

            <div class="form-control mb-4" >
              <label class="label" for="ubicacion_tienda">
                <span class="label-text">Ubicaci贸n tienda</span>
              </label>
              <input type="text" id="ubicacion_tienda" name="ubicacion_tienda" class="input input-bordered w-full" min="5" max="100"/>
            </div>

            <div class="form-control mt-6">
              <label class="label" for="descr_tienda">
                  <span class="label-text">Descripci贸n de la tienda</span>
              </label>
              <textarea type="text" id="descr_tienda" name="descr_tienda" class="input textarea input-primary w-full" placeholder="Descripci贸n de la tienda." min="5" max="200"></textarea>
            </div>

            <div class="form-control mt-6">
              <label class="label" for="foto_tienda">
                  <span class="label-text">Foto de la tienda</span>
              </label>
              <input type="file" id="foto_tienda" name="foto_tienda" accept="image/png, image/jpeg" class="file-input input-primary"/>
            </div>

        </div>
        


        <div class="form-control mt-6">
          <button type="submit" class="btn btn-primary w-full">Crear usuario</button>
        </div>
      </form>
      <p class="text-center text-sm">
        驴Ya tienes cuenta?
        <a href="{% url 'login' %}" class="link link-hover text-primary">Iniciar sesi贸n</a>
      </p>

    </div>
  </div>
</div>
<script>
  function toggleTiendaInput() {
    const rol = document.getElementById("rol").value;
    const seccionVendedor = document.getElementById("seccion_vendedor");
    const camposVendedor = seccionVendedor.querySelectorAll("input, textarea, select");

    if (rol === "seller") {
      seccionVendedor.style.display = "block"; // se muestra la secci贸n
      camposVendedor.forEach((campo) => campo.setAttribute("required", "required")); // se marcan todos los input como required

    } else {
      seccionVendedor.style.display = "none";
      camposVendedor.forEach((campo) => campo.removeAttribute("required"));
    }

    setTimeout(() => {
      seccionVendedor.scrollIntoView({ behavior: "smooth", block: "start" });
    }, 100);
  }
</script>

{% endblock %}
